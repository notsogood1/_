<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rolling Ball Downhill</title>
  <style>
    /* Style the game area */
    #gameArea {
      width: 100vw;
      height: 100vh;
      background: linear-gradient(to bottom, #87CEEB, #008000);
      overflow: hidden;
      position: relative;
    }

    /* Style the ball */
    #ball {
      width: 50px;
      height: 50px;
      background-color: #FF5733;
      border-radius: 50%;
      position: absolute;
      top: 0; /* Start from the top */
      left: 50%;
      transform: translateX(-50%);
    }

    /* Style the obstacles */
    .obstacle {
      width: 50px;
      height: 50px;
      background-color: #333;
      position: absolute;
      border-radius: 10px;
      top: -50px;
    }

    /* Style the score display */
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 20px;
      color: white;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <div id="gameArea">
    <div id="ball"></div>
    <div id="score">Score: 0</div>
  </div>

  <script>
    // Select game elements
    const gameArea = document.getElementById('gameArea');
    const ball = document.getElementById('ball');
    const scoreDisplay = document.getElementById('score');

    // Ball properties
    let ballPositionX = window.innerWidth / 2;
    let ballPositionY = 0; // Initial Y position
    let ballSpeedX = 10;
    let ballFallSpeed = 2;

    // Obstacle properties
    let obstacles = [];
    let obstacleSpeed = 2;
    let obstacleInterval = 1500; // Spawn obstacle every 1.5 seconds
    let score = 0;

    // Set initial ball position
    ball.style.left = ballPositionX + 'px';
    ball.style.top = ballPositionY + 'px';

    // Function to move the ball left or right
    function moveBall(direction) {
      ballPositionX += direction * ballSpeedX;
      ballPositionX = Math.max(0, Math.min(window.innerWidth - 50, ballPositionX)); // Keep within bounds
      ball.style.left = ballPositionX + 'px';
    }

    // Event listener for arrow keys
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') moveBall(-1);
      if (e.key === 'ArrowRight') moveBall(1);
    });

    // Spawn new obstacles at random x positions
    function spawnObstacle() {
      const obstacle = document.createElement('div');
      obstacle.classList.add('obstacle');
      obstacle.style.left = Math.random() * (window.innerWidth - 50) + 'px';
      gameArea.appendChild(obstacle);
      obstacles.push(obstacle);
    }

    // Update game elements (ball, obstacles, and score)
    function updateGame() {
      // Move the ball downward
      ballPositionY += ballFallSpeed;
      ball.style.top = ballPositionY + 'px';

      // Check for collision and move obstacles
      obstacles.forEach((obstacle, index) => {
        const currentTop = parseInt(obstacle.style.top || 0);
        obstacle.style.top = currentTop + obstacleSpeed + 'px';

        // Check for collision with the ball
        const obstacleRect = obstacle.getBoundingClientRect();
        const ballRect = ball.getBoundingClientRect();
        if (
          obstacleRect.bottom > ballRect.top &&
          obstacleRect.top < ballRect.bottom &&
          obstacleRect.right > ballRect.left &&
          obstacleRect.left < ballRect.right
        ) {
          alert('Game Over! Final Score: ' + score);
          window.location.reload(); // Restart the game
        }

        // Remove obstacles that go off screen
        if (currentTop > window.innerHeight) {
          obstacle.remove();
          obstacles.splice(index, 1);
          score++; // Increase score for each avoided obstacle
        }
      });

      // Increase difficulty over time
      ballFallSpeed += 0.001;
      obstacleSpeed += 0.001;
      if (obstacleInterval > 500) obstacleInterval -= 1;

      // Update score display
      scoreDisplay.textContent = 'Score: ' + score;
    }

    // Game loop to keep the game running
    setInterval(updateGame, 20); // 50 frames per second
    setInterval(spawnObstacle, obstacleInterval); // Spawn obstacles at intervals
  </script>
</body>
</html>
